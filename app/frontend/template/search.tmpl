{{ define "search" }}
    {{ template "header" . }}
    <div class="container-fluid px-4 px-lg-5 my-5">
        <!-- 搜索条件展示区域 -->
        {{ if .query }}
            <div class="d-inline-flex align-items-center bg-primary-soft rounded-pill p-2 pe-1 mb-4 shadow-sm" style="min-width: 130px;">
                <span class="text-primary fw-medium d-flex align-items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search me-2" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                    {{ .query }}
                </span>
                <a href="/" class="btn-close-enhanced ms-auto">
                    <button type="button" class="btn btn-link text-danger p-1" aria-label="Close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                        </svg>
                    </button>
                </a>
            </div>
        {{ end }}

        <!-- 商品列表 -->
            <div class="row g-4 g-lg-5">
                {{range .items}}
                    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6">
                        <div class="card h-100 shadow-sm hover-card" style="border: none !important;">
                            <a href="/product?id={{ .Id }}" class="text-decoration-none position-relative">
                                <div class="ratio ratio-4x3 bg-light overflow-hidden">
                                    <img src="{{index .Media.MainImages 0}}"
                                         class="card-img-top object-fit-cover p-2 transition-scale"
                                         alt="{{ .BasicInfo.Title}}">
                                </div>

                                <div class="card-body p-3">
                                    <h6 class="card-title text-dark mb-2 line-clamp-2" style="height: 3em;">
                                        <div class="line-clamp-1 fw-medium">{{ .BasicInfo.Title }}</div>
                                        {{if .BasicInfo.SubTitle}}
                                            <div class="line-clamp-1 text-muted small">{{ .BasicInfo.SubTitle }}</div>
                                        {{end}}
                                    </h6>
                                    <div class="d-flex align-items-end justify-content-between">
                                        <div class="text-primary fs-5 fw-bold">
                                            {{range $index, $sku := .Skus}}  <!-- SKUs大写 -->
                                            ¥{{printf "%.2f" $sku.Price}}  <!-- Price大写 -->
                                            {{break}}
                                            {{else}}
                                                ¥0.00
                                            {{end}}
                                        </div>
                                        <button class="btn btn-sm btn-outline-primary rounded-pill px-3">
                                            <i class="fas fa-cart-plus me-1"></i>购买
                                        </button>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                {{end}}
            </div>
        </div>
    {{ template "footer" }}
{{ end }}

<style>
    /* 自定义颜色扩展 */
    .bg-primary-soft {
        background-color: rgba(13, 110, 253, 0.1);
    }

    /* 关闭按钮交互动画 */
    .btn-close-pill {
        transition: transform 0.2s ease, opacity 0.2s ease;
        opacity: 0.7;
        margin-left: 0.5rem;
    }
    .btn-close-pill:hover {
        opacity: 1;
        transform: rotate(90deg);
    }
    .btn-close-enhanced {
        margin-left: auto; /* 关键属性 */
    }
    .btn-close-pill button:hover {
        text-decoration: none;
    }
</style>